<head>
	<title>ZenLeaderBoard</title>
</head>

<body ng-app="ZenLeaderBoard">
	
	<h1>ZenBanx Transactions</h1>
	<a href = "http://www.zenbanx.com"><img src = "https://pbs.twimg.com/profile_images/598226607082352640/pJ2A1tF9.jpg"></a>           
	
	{{> loginButtons}}
<!-- 	{{> sortBoard}} -->
	<div ng-include="'client/views/table.ng.html'"></div>

</body>

<template name = "sortBoard">
		
	{{#if currentUser}}
		<script>
			function populate()
			{
				var dateTime = moment(new Date()).format() + "";
				var date = dateTime.substring(0, dateTime.indexOf("T"));
				var time = dateTime.substring(dateTime.indexOf("T")+1, dateTime.indexOf("T") + 6); 
				//alert("Using the current date and time: " + dateTime);
				document.getElementById('myDate').value = date;
				document.getElementById('myTime').value = time;	
			}
		</script>
		<div>
			<p>Insert New Transaction</p>
			<form name= "transaction" class= "new-transaction" autocomplete= "off">
				<input type= "text" name= "Account ID" placeholder="Account ID"/>
				<input type= "text" name= "Transaction Code" placeholder="Transaction Code" required/>
				<input list="Currency" type= "id" name= "Base Currency" placeholder="Base Currency" maxlength="3"/>
				<datalist id="Currency">
					<option value="USD"></option> 
					<option value="CAD"></option> 
					<option value="EUR"></option> 
					<option value="AUD"></option> 
					<option value="YEN"></option> 
					<option value="HKD"></option> 
					<option value="SGD"></option> 
					<option value="INR"></option> 
					<option value="GBP"></option> 
				</datalist>
				<input list="Currency" type= "text" name= "Currency" placeholder="Currency" maxlength="3"/>
				<input type= "text" name= "Amount" placeholder="Amount"/>
				<input type= "date" id="myDate" name= "Date" placeholder="Date" required/>
				<input type= "time" id="myTime" name= "Time" placeholder="Time" required/>
				<input type= "button" onclick="populate()" name="Current Date and Time" value="Use Current Date and Time"/>
				<input type="submit" class= "add" value= "Add Transaction"/>
			</form>
		</div>
	{{/if}}
	
	<div>
		<input type="submit" value= "Sort"/>

		<select id="criteria">
			<option value="Account ID">Account ID</option>
			<option value="Base Currency">Base Currency</option>
			<option value="Currency">Currency</option>
			<option value="Amount">Amount</option>
			<option value="Time Stamp">Time Stamp</option>
		</select>

	</div>

	<div>
		<p>Vital Statistics</p>
		<table align = "center" style="width:50%">
			<tr>
				<th>Currency</th>
				<th>Count</th> 
				<th>Percentage Used</th>
			</tr>

			{{#each distribution}}
			<tr>
				<td>{{currency}}</td>
				<td>{{count}}</td>
				<td>{{percentage}}</td>
			</tr>
			{{/each}}

			<tr>
				<td><h4>Total</h4></td>
				<td><h4>{{counter}}</h4></td>
				<td><h4>100.0%</h4></td> 
			</tr>
		</table>
		<p> Sort Criteria: {{criteria}} </p>
		<p>Live Transactions</p>
	</div>	



	<div>
		<table align="center" id="Sorted Table" style="width:95%">
			<tr>
				{{#if currentUser}}
				<th></th>
				{{/if}}
				<th>Account ID</th> 
				<th>Transaction Code</th>
				<th>Base Currency</th> 
				<th>Currency</th> 
				<th>Amount</th> 
				<th>Time Stamp</th>
			</tr>

			{{#each sortedTable}}
			<tr >
				{{#if currentUser}}
				<button class="delete">&times;</button>
				{{/if}}
				<td>{{#each items}}{{acctId}}{{else}}Unknown{{/each}}</td> 
				<td>{{#each items}}{{tranCode}}{{else}}Unknown{{/each}}</td> 
				<td>{{baseCurrency}}</td>
				<td>{{#each items}}{{currency}}{{else}}Unknown{{/each}}</td>
				<td>{{#each items}}{{fixAmount amount}}{{else}}Unknown{{/each}}</td>  
				<td>{{formatDate timeStamp}}</td> 
			</tr>
			{{/each}}
		</table>
	</div>

</template> 